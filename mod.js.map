{"version":3,"file":"mod.js","sources":["../node_modules/@stdlib/ndarray-base-bytes-per-element/lib/main.js","../lib/defaults.js","../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport BYTES_PER_ELEMENT from './bytes_per_element.json';\n\n\n// MAIN //\n\n/**\n* Returns the number of bytes per element provided an underlying array data type.\n*\n* @param {string} dtype - data type\n* @returns {(NonNegativeInteger|null)} number of bytes per element\n*\n* @example\n* var nbytes = bytesPerElement( 'float64' );\n* // returns 8\n*\n* nbytes = bytesPerElement( 'generic' );\n* // returns null\n*/\nfunction bytesPerElement( dtype ) {\n\treturn BYTES_PER_ELEMENT[ dtype ] || null;\n}\n\n\n// EXPORTS //\n\nexport default bytesPerElement;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\nvar defaults = {\n\t// Define a default block size (in bytes):\n\t'BLOCK_SIZE_IN_BYTES': 64|0, // 64b is a common cache line size. How applicable the common cache line size is here is debatable, given that, depending on the associated stride(s), the innermost loop may not iterate over adjacent elements. The primary goal is to have a block size in which all data within a block can always fit in (L1) cache, regardless of cache size (i.e., cache-oblivious). For reference, a common L1 cache size is 32kB per core. For best performance, block sizes should be tuned based on system hardware; however, such tuning is not readily available to us here. Without obvious better alternatives, 64b has some theoretical (and practical) underpinning, and it should be good enough for most inputs, especially for ndarrays with near contiguity.\n\n\t// Define a default block size (in elements):\n\t'BLOCK_SIZE_IN_ELEMENTS': 8|0 // 64 bytes / 8 bytes per element (i.e., default element size is same as a double)\n};\n\n\n// EXPORTS //\n\nexport default defaults;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2026 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport bytesPerElement from '@stdlib/ndarray-base-bytes-per-element';\nimport defaults from './defaults.js';\n\n\n// MAIN //\n\n/**\n* Returns a loop block size for multi-dimensional array tiled loops.\n*\n* @param {*} dtypeX - first input array data type\n* @param {*} dtypeY - second input array data type\n* @param {*} dtypeZ - third input array data type\n* @param {*} dtypeW - output array data type\n* @returns {integer} block size (in units of elements)\n*\n* @example\n* var bsize = ternaryBlockSize( 'float64', 'float64', 'float64', 'float64' );\n* // returns <number>\n*/\nfunction ternaryBlockSize( dtypeX, dtypeY, dtypeZ, dtypeW ) {\n\tvar nbx;\n\tvar nby;\n\tvar nbz;\n\tvar nbw;\n\tvar max;\n\n\tnbx = bytesPerElement( dtypeX );\n\tnby = bytesPerElement( dtypeY );\n\tnbz = bytesPerElement( dtypeZ );\n\tnbw = bytesPerElement( dtypeW );\n\tif ( nbx === null || nby === null || nbz === null || nbw === null ) { // e.g., \"generic\" arrays\n\t\treturn defaults.BLOCK_SIZE_IN_ELEMENTS;\n\t}\n\t// Find the largest element size among all four arrays...\n\tmax = nbx;\n\tif ( nby > max ) {\n\t\tmax = nby;\n\t}\n\tif ( nbz > max ) {\n\t\tmax = nbz;\n\t}\n\tif ( nbw > max ) {\n\t\tmax = nbw;\n\t}\n\treturn ( defaults.BLOCK_SIZE_IN_BYTES/max )|0; // asm type annotation\n}\n\n\n// EXPORTS //\n\nexport default ternaryBlockSize;\n"],"names":["bytesPerElement","dtype","BYTES_PER_ELEMENT","defaults","ternaryBlockSize","dtypeX","dtypeY","dtypeZ","dtypeW","nbx","nby","nbz","nbw","max"],"mappings":";;yOAwCA,SAASA,EAAiBC,GACzB,OAAOC,EAAmBD,IAAW,IACtC,CCpBA,IAAIE,EAEoB,GAFpBA,EAKuB,ECc3B,SAASC,EAAkBC,EAAQC,EAAQC,EAAQC,GAClD,IAAIC,EACAC,EACAC,EACAC,EACAC,EAMJ,OAJAJ,EAAMT,EAAiBK,GACvBK,EAAMV,EAAiBM,GACvBK,EAAMX,EAAiBO,GACvBK,EAAMZ,EAAiBQ,GACV,OAARC,GAAwB,OAARC,GAAwB,OAARC,GAAwB,OAARC,EAC7CT,GAIHO,GADLG,EAAMJ,KAELI,EAAMH,GAEFC,EAAME,IACVA,EAAMF,GAEFC,EAAMC,IACVA,EAAMD,GAEET,EAA6BU,EAAM,EAC7C","x_google_ignoreList":[0]}